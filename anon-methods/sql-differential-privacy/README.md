# Overview

This repository is derived from Uber Differential Privacy Tool (https://github.com/uber/sql-differential-privacy) and contains a Client-Server system written in Python.
The files can be found under: code/anon-methods/sql-differential-privacy/src/main/scala/examples/

# Working with the system

simpleClient.py has some static JSON data which it sends to simpleServer.py
Change the JSON data and url in the Client script as per need.

In simpleServer.py provide the path where Uber Tool is creating the result (.txt) files.

In ElasticSensitivityExample.scala and QueryRewritingExample.scala the database name from the schema has to be entered and also the path where simpleServer.py is generating the JSON files. 
For DB connection provide the appropriate credentials in ElasticSensitivityExample.scala and QueryRewritingExample.scala in the DB connection section.

After these changes, run ElasticSensitivityExample.scala and/or QueryRewritingExample.scala scripts along with simpleServer.py.
Run the Client script to send query, budget and epsilon values. 

# Dataflow

Client sends JSON data to the Server which at first schecks for budget of the Client. If the budget has exceeded it does not process the queries. If there is remaining budget then it extracts the JSON parameters and writes them to a file. 

Uber Tool (ElasticSensitivityExample.scala and QueryRewritingExample.scala) run on the server and the scripts keep schecking for new JSON files created by the Server. If it finds a new file, it extracts the query from the file and runs the analysis. The result generated by the tool is written to a .txt file and stored in a directory. 

The Server keeps checking the results directory for new .txt files and if it encounters one then it takes the query result from the file and sends it back to the client. 





